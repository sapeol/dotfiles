# Get dotfiles directory (resolves symlinks)
DOTFILES="${${${(%):-%N}:A:h}:h}"

# Source shell configs
source "$DOTFILES/shell/exports.zsh"
source "$DOTFILES/shell/aliases.zsh"
source "$DOTFILES/shell/prompt.zsh"
source "$DOTFILES/shell/fzf.zsh"
source "$DOTFILES/shell/node.zsh"
source "$DOTFILES/shell/lazy.zsh"

# Zoxide (smarter cd)
eval "$(zoxide init zsh)"

# Starship prompt
eval "$(starship init zsh)"

# Key bindings
bindkey -v  # Vi mode
# Ctrl+R is handled by fzf (sourced from $DOTFILES/shell/fzf.zsh)
export PATH="$HOME/.local/bin:$PATH"

# bun completions
[ -s "/Users/sudeep/.bun/_bun" ] && source "/Users/sudeep/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

# pnpm
export PNPM_HOME="/Users/sudeep/Library/pnpm"
case ":$PATH:" in
  *":$PNPM_HOME:"*) ;;
  *) export PATH="$PNPM_HOME:$PATH" ;;
esac
# pnpm end

# Added by Antigravity
export PATH="/Users/sudeep/.antigravity/antigravity/bin:$PATH"
alias nd="npm run dev"

# Added by LM Studio CLI (lms)
export PATH="$PATH:/Users/sudeep/.lmstudio/bin"
# End of LM Studio CLI section


# Battery monitoring shortcut
alias batt="pmset -g batt"
alias batt-health="system_profiler SPPowerDataType | command grep -E \"Cycle Count|Condition|Maximum Capacity\""


# ðŸ”‹ Battery Management Aliases (batt)
alias batt-status='batt status'
alias batt-limit='batt limit'
alias batt-led-on='echo "ivory" | sudo -S batt magsafe-led enable'
alias batt-led-off='echo "ivory" | sudo -S batt magsafe-led always-off'
alias batt-calibrate='batt calibration start'
alias batt-health='system_profiler SPPowerDataType | command grep -E "Cycle Count|Condition|Maximum Capacity\""
